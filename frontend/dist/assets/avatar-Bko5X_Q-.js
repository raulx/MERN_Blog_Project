import{r as o,_ as S}from"./index-B_dqLsKw.js";import{$ as w,e as x,b as E,g as y,c as _}from"./index-BAg4RXxu.js";const N={default:void 0};function $(t,e="",i){var a,r,d,f;const c=[];if(typeof t=="object"){for(const n of Object.keys(t))if(n in t){const s=(a=t[n])===null||a===void 0?void 0:a.toString(),u=s==null?void 0:s.startsWith("-"),l=e===""?"":"-",m=u?`-${e}`:e,b=u?s==null?void 0:s.substring(1):s;if(b===void 0)continue;const p=(r=void 0)!==null&&r!==void 0?r:b,h=n==="initial"?`${m}${l}${p}`:`${n}:${m}${l}${p}`;c.push(h)}}if(typeof t=="string"){const n=t.startsWith("-"),s=e===""?"":"-",u=n?`-${e}`:e,l=n?t.substring(1):t,m=(d=void 0)!==null&&d!==void 0?d:l;c.push(`${u}${s}${m}`)}if(typeof t=="boolean"){const n=e===""?"":"-",s=t.toString(),u=(f=void 0)!==null&&f!==void 0?f:s;c.push(`${e}${n}${u}`)}return c.join(" ")}const g={m:{default:void 0},mx:{default:void 0},my:{default:void 0},mt:{default:void 0},mr:{default:void 0},mb:{default:void 0},ml:{default:void 0}};function M(t){const{m:e=g.m.default,mx:i=g.mx.default,my:a=g.my.default,mt:r=g.mt.default,mr:d=g.mr.default,mb:f=g.mb.default,ml:c=g.ml.default,...n}=t;return{m:e,mx:i,my:a,mt:r,mr:d,mb:f,ml:c,rest:n}}function I(t){return[$(t.m,"rt-r-m"),$(t.mx,"rt-r-mx"),$(t.my,"rt-r-my"),$(t.mt,"rt-r-mt"),$(t.mr,"rt-r-mr"),$(t.mb,"rt-r-mb"),$(t.ml,"rt-r-ml")].filter(Boolean).join(" ")}const R={default:void 0},L="Avatar",[k,H]=w(L),[P,C]=k(L),j=o.forwardRef((t,e)=>{const{__scopeAvatar:i,...a}=t,[r,d]=o.useState("idle");return o.createElement(P,{scope:i,imageLoadingStatus:r,onImageLoadingStatusChange:d},o.createElement(x.span,S({},a,{ref:e})))}),z="AvatarImage",F=o.forwardRef((t,e)=>{const{__scopeAvatar:i,src:a,onLoadingStatusChange:r=()=>{},...d}=t,f=C(z,i),c=T(a),n=E(s=>{r(s),f.onImageLoadingStatusChange(s)});return y(()=>{c!=="idle"&&n(c)},[c,n]),c==="loaded"?o.createElement(x.img,S({},d,{ref:e,src:a})):null}),V="AvatarFallback",B=o.forwardRef((t,e)=>{const{__scopeAvatar:i,delayMs:a,...r}=t,d=C(V,i),[f,c]=o.useState(a===void 0);return o.useEffect(()=>{if(a!==void 0){const n=window.setTimeout(()=>c(!0),a);return()=>window.clearTimeout(n)}},[a]),f&&d.imageLoadingStatus!=="loaded"?o.createElement(x.span,S({},r,{ref:e})):null});function T(t){const[e,i]=o.useState("idle");return y(()=>{if(!t){i("error");return}let a=!0;const r=new window.Image,d=f=>()=>{a&&i(f)};return i("loading"),r.onload=d("loaded"),r.onerror=d("error"),r.src=t,()=>{a=!1}},[t]),e}const D=j,W=F,G=B,v={size:{default:"3"},variant:{default:"soft"},color:{default:void 0},highContrast:N,radius:R},K=o.forwardRef((t,e)=>{const{rest:i,...a}=M(t),{className:r,style:d,size:f=v.size.default,variant:c=v.variant.default,color:n=v.color.default,highContrast:s=v.highContrast.default,radius:u=v.radius.default,fallback:l,...m}=i,[b,p]=o.useState("idle");return o.createElement(D,{"data-accent-color":n,"data-radius":u,className:_("rt-AvatarRoot",r,$(f,"rt-r-size"),`rt-variant-${c}`,{"rt-high-contrast":s},I(a)),style:d},b==="idle"||b==="loading"?o.createElement("span",{className:"rt-AvatarFallback"}):null,b==="error"?o.createElement(G,{className:_("rt-AvatarFallback",{"rt-one-letter":typeof l=="string"&&l.length===1,"rt-two-letters":typeof l=="string"&&l.length===2}),delayMs:0},l):null,o.createElement(W,{ref:e,className:"rt-AvatarImage",...m,onLoadingStatusChange:h=>{var A;(A=m.onLoadingStatusChange)===null||A===void 0||A.call(m,h),p(h)}}))});K.displayName="Avatar";export{K as A};
