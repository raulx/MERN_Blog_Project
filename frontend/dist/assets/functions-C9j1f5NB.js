var x={exports:{}},_=x.exports,k;function $(){return k||(k=1,function(b,P){(function(y,u){b.exports=u()})(_,function(){return function(y){var u={};function c(o){if(u[o])return u[o].exports;var d=u[o]={i:o,l:!1,exports:{}};return y[o].call(d.exports,d,d.exports,c),d.l=!0,d.exports}return c.m=y,c.c=u,c.d=function(o,d,w){c.o(o,d)||Object.defineProperty(o,d,{enumerable:!0,get:w})},c.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},c.t=function(o,d){if(1&d&&(o=c(o)),8&d||4&d&&typeof o=="object"&&o&&o.__esModule)return o;var w=Object.create(null);if(c.r(w),Object.defineProperty(w,"default",{enumerable:!0,value:o}),2&d&&typeof o!="string")for(var p in o)c.d(w,p,(function(j){return o[j]}).bind(null,p));return w},c.n=function(o){var d=o&&o.__esModule?function(){return o.default}:function(){return o};return c.d(d,"a",d),d},c.o=function(o,d){return Object.prototype.hasOwnProperty.call(o,d)},c.p="",c(c.s=0)}([function(y,u,c){var o;function d(n){return["image/png","image/jpeg","image/gif"].some(r=>r===n)}c.r(u),c.d(u,"canvastoDataURL",function(){return p}),c.d(u,"canvastoFile",function(){return j}),c.d(u,"dataURLtoFile",function(){return E}),c.d(u,"dataURLtoImage",function(){return M}),c.d(u,"downloadFile",function(){return D}),c.d(u,"filetoDataURL",function(){return O}),c.d(u,"imagetoCanvas",function(){return R}),c.d(u,"urltoBlob",function(){return G}),c.d(u,"urltoImage",function(){return B}),c.d(u,"compress",function(){return J}),c.d(u,"compressAccurately",function(){return T}),c.d(u,"EImageType",function(){return o}),function(n){n.PNG="image/png",n.JPEG="image/jpeg",n.GIF="image/gif"}(o||(o={}));var w=function(n,r,t,e){return new(t||(t=Promise))(function(a,l){function f(s){try{g(e.next(s))}catch(i){l(i)}}function h(s){try{g(e.throw(s))}catch(i){l(i)}}function g(s){var i;s.done?a(s.value):(i=s.value,i instanceof t?i:new t(function(m){m(i)})).then(f,h)}g((e=e.apply(n,[])).next())})};function p(n,r=.92,t=o.JPEG){return w(this,void 0,void 0,function*(){return d(t)||(t=o.JPEG),n.toDataURL(t,r)})}function j(n,r=.92,t=o.JPEG){return new Promise(e=>n.toBlob(a=>e(a),t,r))}var L=function(n,r,t,e){return new(t||(t=Promise))(function(a,l){function f(s){try{g(e.next(s))}catch(i){l(i)}}function h(s){try{g(e.throw(s))}catch(i){l(i)}}function g(s){var i;s.done?a(s.value):(i=s.value,i instanceof t?i:new t(function(m){m(i)})).then(f,h)}g((e=e.apply(n,[])).next())})};function E(n,r){return L(this,void 0,void 0,function*(){const t=n.split(",");let e=t[0].match(/:(.*?);/)[1];const a=atob(t[1]);let l=a.length;const f=new Uint8Array(l);for(;l--;)f[l]=a.charCodeAt(l);return d(r)&&(e=r),new Blob([f],{type:e})})}function M(n){return new Promise((r,t)=>{const e=new Image;e.onload=()=>r(e),e.onerror=()=>t(new Error("dataURLtoImage(): dataURL is illegal")),e.src=n})}function D(n,r){const t=document.createElement("a");t.href=window.URL.createObjectURL(n),t.download=r||Date.now().toString(36),document.body.appendChild(t);const e=document.createEvent("MouseEvents");e.initEvent("click",!1,!1),t.dispatchEvent(e),document.body.removeChild(t)}function O(n){return new Promise(r=>{const t=new FileReader;t.onloadend=e=>r(e.target.result),t.readAsDataURL(n)})}var q=function(n,r,t,e){return new(t||(t=Promise))(function(a,l){function f(s){try{g(e.next(s))}catch(i){l(i)}}function h(s){try{g(e.throw(s))}catch(i){l(i)}}function g(s){var i;s.done?a(s.value):(i=s.value,i instanceof t?i:new t(function(m){m(i)})).then(f,h)}g((e=e.apply(n,[])).next())})};function R(n,r={}){return q(this,void 0,void 0,function*(){const t=Object.assign({},r),e=document.createElement("canvas"),a=e.getContext("2d");let l,f;for(const h in t)Object.prototype.hasOwnProperty.call(t,h)&&(t[h]=Number(t[h]));if(t.scale){const h=t.scale>0&&t.scale<10?t.scale:1;f=n.width*h,l=n.height*h}else f=t.width||t.height*n.width/n.height||n.width,l=t.height||t.width*n.height/n.width||n.height;switch([5,6,7,8].some(h=>h===t.orientation)?(e.height=f,e.width=l):(e.height=l,e.width=f),t.orientation){case 3:a.rotate(180*Math.PI/180),a.drawImage(n,-e.width,-e.height,e.width,e.height);break;case 6:a.rotate(90*Math.PI/180),a.drawImage(n,0,-e.width,e.height,e.width);break;case 8:a.rotate(270*Math.PI/180),a.drawImage(n,-e.height,0,e.height,e.width);break;case 2:a.translate(e.width,0),a.scale(-1,1),a.drawImage(n,0,0,e.width,e.height);break;case 4:a.translate(e.width,0),a.scale(-1,1),a.rotate(180*Math.PI/180),a.drawImage(n,-e.width,-e.height,e.width,e.height);break;case 5:a.translate(e.width,0),a.scale(-1,1),a.rotate(90*Math.PI/180),a.drawImage(n,0,-e.width,e.height,e.width);break;case 7:a.translate(e.width,0),a.scale(-1,1),a.rotate(270*Math.PI/180),a.drawImage(n,-e.height,0,e.height,e.width);break;default:a.drawImage(n,0,0,e.width,e.height)}return e})}function G(n){return fetch(n).then(r=>r.blob())}function B(n){return new Promise((r,t)=>{const e=new Image;e.onload=()=>r(e),e.onerror=()=>t(new Error("urltoImage(): Image failed to load, please check the image URL")),e.src=n})}var N=function(n,r,t,e){return new(t||(t=Promise))(function(a,l){function f(s){try{g(e.next(s))}catch(i){l(i)}}function h(s){try{g(e.throw(s))}catch(i){l(i)}}function g(s){var i;s.done?a(s.value):(i=s.value,i instanceof t?i:new t(function(m){m(i)})).then(f,h)}g((e=e.apply(n,[])).next())})};function J(n,r={}){return N(this,void 0,void 0,function*(){if(!(n instanceof Blob))throw new Error("compress(): First arg must be a Blob object or a File object.");if(typeof r!="object"&&(r=Object.assign({quality:r})),r.quality=Number(r.quality),Number.isNaN(r.quality))return n;const t=yield O(n);let e=t.split(",")[0].match(/:(.*?);/)[1],a=o.JPEG;d(r.type)&&(a=r.type,e=r.type);const l=yield M(t),f=yield R(l,Object.assign({},r)),h=yield p(f,r.quality,a),g=yield E(h,e);return g.size>n.size?n:g})}function T(n,r={}){return N(this,void 0,void 0,function*(){if(!(n instanceof Blob))throw new Error("compressAccurately(): First arg must be a Blob object or a File object.");if(typeof r!="object"&&(r=Object.assign({size:r})),r.size=Number(r.size),Number.isNaN(r.size)||1024*r.size>n.size)return n;r.accuracy=Number(r.accuracy),(!r.accuracy||r.accuracy<.8||r.accuracy>.99)&&(r.accuracy=.95);const t=r.size*(2-r.accuracy)*1024,e=1024*r.size,a=r.size*r.accuracy*1024,l=yield O(n);let f=l.split(",")[0].match(/:(.*?);/)[1],h=o.JPEG;d(r.type)&&(h=r.type,f=r.type);const g=yield M(l),s=yield R(g,Object.assign({},r));let i,m=.5;const z=[null,null];for(let v=1;v<=7;v++){i=yield p(s,m,h);const I=.75*i.length;if(v===7){(t<I||a>I)&&(i=[i,...z].filter(A=>A).sort((A,S)=>Math.abs(.75*A.length-e)-Math.abs(.75*S.length-e))[0]);break}if(t<I)z[1]=i,m-=Math.pow(.5,v+1);else{if(!(a>I))break;z[0]=i,m+=Math.pow(.5,v+1)}}const U=yield E(i,f);return U.size>n.size?n:U})}}])})}(x)),x.exports}var F,C;function Q(){return C||(C=1,F=$()),F}var W=Q();function H(b){return new Promise((P,y)=>{let u;(async()=>{try{u=await W.compressAccurately(b,25),P(u)}catch(o){y(o)}})()})}const K=b=>{const P=new Date(b).getTime(),u=((new Date().getTime()-P)/36e5).toFixed();let c;return u<1?c="Just Now":10<u&&u<24?c="yesterday":u>24&&u<720?c=`${(u/24).toFixed()}d ago`:u>720&&u<8640?c=`${(u/24/30).toFixed()}months ago`:u>8640?c=`${(u/24/30/12).toFixed()}years ago`:c=`${u}h ago`,c};export{H as c,K as f};
