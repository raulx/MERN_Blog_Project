import{r as x,a as b,j as e,b as v}from"./index-B_dqLsKw.js";import{a as w,b as y,F as N}from"./index.esm-CF2qqmXm.js";import{_ as c}from"./index-DFI_rBIQ.js";import{c as C}from"./functions-C9j1f5NB.js";import{F}from"./footer-BnNBApCN.js";import"./iconBase-cJBVfrGc.js";function R(){const[r,i]=x.useState({localUrl:"",remoteUrl:"",file:null}),[d,{isLoading:g}]=b(),[m,p]=x.useState(!1),[a,o]=x.useState({title:"",content:"",category:""}),u=async t=>{if(t.preventDefault(),a.title===""||a.content===""||a.category===""||r.file===null)return c.error("all fields are required !");const l=new FormData;l.append("title",a.title),l.append("content",a.content),l.append("category",a.category);const s=await C(r.file);if(!s)return c.error("image error, select different image");l.append("photo",s);try{(await d(l)).data&&(c.success("Blog created Successfully"),o({title:"",content:"",category:""}),i(j=>({...j,file:null})))}catch(n){c.error("Error occured creating the blog."),console.log(n)}},f=t=>{const l=t.target.files[0];if(l){const s=URL.createObjectURL(l);i(n=>({...n,file:l,localUrl:s}))}else i(s=>({...s,file:"",localUrl:""}))},h=t=>{o(l=>({...l,category:t}))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-12 py-4 sm:w-11/12 w-screen mx-auto",children:[e.jsx("div",{className:"sm:w-1/2 h-72 w-full mx-auto bg-black rounded-lg",children:e.jsx("img",{className:"h-full w-full object-contain",src:r.localUrl?r.localUrl:"https://img.freepik.com/premium-vector/default-image-icon-vector-missing-picture-page-website-design-mobile-app-no-photo-available_87543-11093.jpg"})}),e.jsxs("div",{className:"flex gap-4 w-fit sm:mx-auto sm:flex-row flex-col sm:px-0 px-4",children:[e.jsx("h1",{className:"md:text-xl text-gray-700",children:r.file?e.jsx(e.Fragment,{children:"Change Image :"}):e.jsx(e.Fragment,{children:"Select an image:"})}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>{f(t)}})]}),e.jsxs("form",{onSubmit:u,className:"flex flex-col gap-12",children:[e.jsxs("div",{className:"flex items-center gap-4 sm:w-1/2 w-full sm:mx-auto sm:px-0 px-4",children:[e.jsx("label",{className:"font-extrabold text-3xl",children:"Title:"}),e.jsx("input",{type:"text",required:!0,placeholder:"Add Title",id:"title",className:"w-96 p-4 border-2 outline-none rounded-lg",value:a.title,onChange:t=>{o(l=>({...l,title:t.target.value}))}})]}),e.jsxs("div",{className:"flex items-center relative gap-2 py-4",children:[e.jsx("h1",{className:"sm:w-1/2 w-full sm:mx-auto sm:text-2xl sm:px-0 px-4 font-extrabold text-gray-700",children:"Category :"}),e.jsxs("div",{className:"py-4 px-2 border-2 rounded-lg absolute left-1/2 -translate-x-1/2 top-0 gap-4 flex flex-col w-64 bg-slate-50",onClick:()=>{p(!m)},children:[e.jsxs("div",{className:"flex gap-4 justify-between items-center mx-2 cursor-pointer",children:[a.category?a.category:e.jsx(e.Fragment,{children:"select a category"}),m?e.jsx(w,{}):e.jsx(y,{})]}),m?e.jsx("div",{className:"flex flex-col mt-4 border-2 ",children:v.map(t=>e.jsx("div",{children:e.jsx("div",{onClick:()=>h(t.category),className:"p-2 border-1  hover:bg-slate-100 cursor-pointer",children:t.category})},t.id))}):null]})]}),e.jsxs("div",{className:"flex sm:w-1/2 w-full sm:mx-auto sm:px-0 px-4 flex-col gap-4",children:[e.jsx("label",{className:"font-extrabold text-3xl",children:"Content:"}),e.jsx("textarea",{rows:8,className:"border-2 p-4 outline-none rounded-lg",value:a.content,onChange:t=>{o(l=>({...l,content:t.target.value}))}})]}),e.jsx("div",{className:"sm:px-0 px-4",children:e.jsx("button",{type:"submit",className:"bg-blue-700 p-4 flex justify-center items-center sm:mx-auto text-white text-xl  w-28 uppercase rounded-lg",children:g?e.jsx(N,{className:"animate-spin"}):e.jsx(e.Fragment,{children:"Post"})})})]})]}),e.jsx(F,{})]})}export{R as default};
