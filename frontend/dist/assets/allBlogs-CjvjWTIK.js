import{r as a,c as C,d as B,j as t,b as L}from"./index-B_dqLsKw.js";import{C as F,I as k,a as z}from"./index.es-CUzGv9lR.js";import{c as E,a as I,d as P,F as R}from"./index.esm-CF2qqmXm.js";import"./index-BAg4RXxu.js";import"./functions-C9j1f5NB.js";import"./index-DFI_rBIQ.js";import"./avatar-Bko5X_Q-.js";import"./iconBase-cJBVfrGc.js";function Q(){const[c,x]=a.useState(2),[u,m]=a.useState(!0),l=a.useRef(),[p,y]=C(),n=p.get("category")||"all",g=encodeURIComponent(n),[f,o]=a.useState([]),[h,{isLoading:j,isFetching:w}]=B(),[r,i]=a.useState(!1),d=12,b=async()=>{try{const e=await h({page:c,pageSize:d,category:g});e.data&&(o(s=>[...s,...e.data.data]),x(c+1),e.data.data.length===0&&m(!1))}catch(e){console.log(e)}};a.useEffect(()=>{(async()=>{try{const s=await h({page:1,pageSize:d,category:g});s.data&&o(()=>[...s.data.data])}catch(s){console.log(s)}})()},[n]),a.useEffect(()=>{const e=s=>{r&&!l.current.contains(s.target)&&i(!1)};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[r]);const v=async e=>{const s=new URLSearchParams(p);e==="all"?s.delete("category"):s.set("category",e),y(s),i(!r),m(!0),x(2)};return t.jsxs("div",{className:"flex flex-col sm:w-11/12 mx-auto gap-4 py-6 h-screen -z-10",children:[r?t.jsx("div",{ref:l,className:"border shadow-xl p-2 bg-slate-100 rounded-lg flex flex-col gap-2 absolute z-10 md:right-20 right-4 w-80 md:w-96",children:L.map(e=>t.jsx("p",{className:`text-xl  w-full h-full cursor-pointer py-2 capitalize px-4 rounded-xl  ${e.category===n?"bg-slate-600 text-white":"hover:bg-slate-500 hover:text-white"}`,onClick:()=>v(e.category),children:e.category},e.id))}):null,t.jsxs("div",{className:"flex justify-between items-center mt-6 md:mt-4",children:[t.jsx("h1",{className:"text-2xl text-gray-400 font-extrabold uppercase",children:"Results"}),t.jsxs("div",{className:"flex md:gap-6 gap-0 items-center cursor-pointer mr-10 ",onClick:()=>{i(e=>({...e,isOpen:!e.isOpen}))},children:[t.jsxs("div",{className:"flex gap-4 items-center p-2",children:[t.jsx("p",{className:"text-2xl hidden md:block text-gray-400 font-extrabold uppercase",children:"Sort By"}),t.jsx(E,{className:"text-2xl"})]}),t.jsxs("div",{ref:l,className:"h-full border-2 md:w-72 w-60 rounded py-2 px-4 md:text-lg text-base uppercase flex items-center justify-between",children:[t.jsx("p",{children:n}),t.jsx("div",{children:r?t.jsx(I,{}):t.jsx(P,{})})]})]})]}),j?t.jsx("div",{className:"flex flex-wrap gap-8 justify-between p-4",children:t.jsx(F,{times:d*(c-1)})}):t.jsx(k,{dataLength:f.length,next:b,className:"flex flex-wrap gap-8 justify-between items-center sm:px-0 px-4",hasMore:u,endMessage:t.jsx("p",{className:"w-screen justify-center flex items-center",children:"You have seen it all !"}),children:f.map((e,s)=>t.jsx(z,{cardData:e,afterDelete:()=>{o(N=>N.filter(S=>S._id!=e._id))}},s))}),w&&t.jsx("div",{className:"mx-auto py-2 text-center",children:t.jsx(R,{className:"animate-spin"})})]})}export{Q as default};
